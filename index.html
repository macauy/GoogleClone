<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/181a2bd762.js" crossorigin="anonymous"></script>

</head>
<body>
    
    <header>
        <nav>
            <ul>
                <li><a class="" href="https://mail.google.com/mail/&amp;ogbl" target="_top">Gmail</a></li>
                <li><a class="" href="https://www.google.com.uy/imghp?&amp;ogbl" target="_top">Imágenes</a></li>
                <li class="icon-container dots" id="dots-li">
                    <div class="dots-icon" id="dots">
                        <a  href=""></a>
                    </div>
                </li>
                <li class="icon-container">
                    <a href="https://accounts.google.com/SignOutOptions?continue=https://www.google.com/">
                        <img class="block" src="images/profile.png" srcset="https://lh3.googleusercontent.com/ogw/AAEL6sgRhQuywxXrG4EZ2UAVe6w6zuTo7aHIRBEf-A8sw9M=s32-c-mo 1x, https://lh3.googleusercontent.com/ogw/AAEL6sgRhQuywxXrG4EZ2UAVe6w6zuTo7aHIRBEf-A8sw9M=s64-c-mo 2x " alt="" aria-hidden="true" data-noaft="" data-atf="1" data-frt="0" alt="Imágen de Perfil">
                    </a>
                </li>
            </ul>
        </nav>
        <!-- section apps desplegable-->
        <div class="apps-container hidden" id="apps">
            <ul>
                <li>Drive</li>
                <li>Calendario</li>
                <li>Mapas</li>
                <li>Play</li>
                <li>Gmail</li>
                <li>Búsqueda</li>
                <li>Negocios</li>
                <li>Youtube</li>
                <li>Fotos</li>
                <li>Noticias</li>
                <li>Meet</li>
                <li>Chat</li>
            </ul>
        </div>
    </header>

    <section>
        <img class="logo" src="https://www.google.com.uy/images/branding/googlelogo/1x/googlelogo_color_272x92dp.png" alt="Google">
        <div class="search-box">

            <div class="search" id="search">
                <div class="lupa">
                    <svg focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg>
                </div>
                <input type="text" id="search-input" title="Buscar" autocomplete="off">
                <div class="search-buttons">
                    <svg id="cross" class="hidden" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
                    <div class="search-buttons-item"><a href=""><img src="images/micro.png" alt="Búsqueda por voz" title="Búsqueda por voz"></a></div>
                    <div class="search-buttons-item"><a href=""><img src="images/camara.svg" alt="Búsqueda con cámara" title="Búsqueda por imagen"></a></div>
                </div>
            </div>

            <!-- section busqueda desplegable -->
            <div class="busqueda hidden" id="search-box">
                <div class="busqueda-line"></div>
                <ul id="search-list">
                    <li>
                        <div class="recent-img"></div>   
                        <span>Aquí se muestran las búsquedas recientes</span>
                        <div class="borrar">Borrar</div>
                    </li>
                    <li>
                        <div class="recent-img"></div>   
                        <span>Busca algo nuevo y quedará en el historial</span>
                        <div class="borrar">Borrar</div>
                    </li>
                    <li>
                        <div class="recent-img"></div>   
                        <span>Has click en 'Borrar' para eliminar este item</span>
                        <div class="borrar">Borrar</div>
                    </li>
                </ul>
                <div class="botones">
                    <button class="boton">Buscar con Google</button>
                    <button class="boton">Voy a tener suerte</button>
                </div>
            </div>
        </div>
        <div class="botones">
            <button class="boton">Buscar con Google</button>
            <button class="boton">Voy a tener suerte</button>
        </div>
    </section>


    <footer>
        <div class="footer-item1">Uruguay</div>
        <div class="footer-item2">
        <ul class="footer-left">
            <li><a href="https://about.google">Sobre Google</a></li>
            <li><a href="https://ads.google.com/home/">Publicidad</a></li>
            <li><a href="https://www.google.com/services">Negocios</a></li>
            <li><a href="https://google.com/search/howsearchworks">Cómo funciona la Búsqueda</a></li>
        </ul>
        <ul class="footer-right">
            <li><a href="https://policies.google.com/privacy">Privacidad</a></li>
            <li><a href="https://policies.google.com/">Condiciones</a></li>
            <li><a href="">Preferencias</a></li>
        </ul>
        </div>
    </footer>   
    
    <script>
        const input = document.getElementById('search-input')
        const box = document.getElementById('search-box')
        const search = document.getElementById('search')
        const searchList = document.getElementById('search-list')
        const apps = document.getElementById('apps')
        const dots = document.getElementById('dots')
        const cross = document.getElementById('cross')

        // Eventos
        dots.addEventListener('click', abrirApps)
        input.addEventListener('click',()=>{
            abrirSearchBox()
            cerrarApps()
        })

        // funcion abrir apps
        function abrirApps() {
            if (apps.classList.contains('hidden'))
                apps.classList.remove('hidden')
            else    
                apps.classList.add('hidden')
        }

        // funcion abrir search
        function abrirSearchBox() {
            box.classList.remove('hidden')
            search.classList.add('search-popup')
        }

        // funcion cerrar apps
        function cerrarApps() {
            apps.classList.add('hidden')
        }

        // funcion cerrar search
        function cerrarSearchBox()  {
            box.classList.add('hidden')
            search.classList.remove('search-popup')
        }

        
        // Limpiar búsqueda
        cross.addEventListener('click',()=> {
            input.value = ""
            cross.classList.add('hidden')
        })


        // Evento escribir en search
        input.addEventListener("keypress", function(event) {

            // Habilitar cerrar
            cross.classList.remove('hidden')

            // Agregar busqueda a historial al dar enter
            if (event.key === "Enter") {
                crearChildNode(input.value)
                input.value = ''
            }
        });

        // Crear hijo en historial
        function crearChildNode(entrada) {
            let item = document.createElement("li")
            let div1 = document.createElement("div")
            let div2 = document.createElement("div")
            let span = document.createElement("span")

            span.innerHTML = entrada
            div1.classList.add("recent-img")
            div2.classList.add("borrar")
            div2.innerHTML = 'Borrar'
            item.appendChild(div1)
            item.appendChild(span)
            item.appendChild(div2)
            searchList.appendChild(item)
        }


        // Evento click genérico
        // Si estoy fuera de los boxes cierro lo que esté desplegado
        document.addEventListener('click',function(e) {
            const isBox = e.target.closest('#search-box')
            const isApps = e.target.closest('#apps')
            const isDots = (e.target.id == 'dots' || e.target.innerHTML.id == 'dots')

            // Si hago click en una de las ventanas 
            if (isBox != null) {
                // Estoy dentro de la caja de búsqueda

                // Borrar elemento buscado
                if (e.target.classList =='borrar') {
                    const linea = e.target.parentNode
                    linea.remove()
                } else if (e.target.localName == 'span') {
                    // Copiar historial a búsqueda actual
                    input.value = e.target.innerHTML
                }
            } else if (isApps != null) {
                // Estoy dentro de la caja de apps
                
            } else if (isDots) {
                cerrarSearchBox()

            } else if (e.target.localName !='input') {
                // Estoy en otro lado de la pantalla, cierro todos los popups
                
                // Cerrar search box
                cerrarSearchBox()

                // Cerrar apps
                cerrarApps()
            }
        })

    </script>
</main>
</body>
</html>